generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Deadline {
  id          Int      @id @default(autoincrement())
  auteur      Int
  module      String
  type        String
  titre       String
  timestamp   DateTime
  lieu        String
  prof        String
  description String?
  historique  Json
  etendue     String
  tp          String?
  attachments String?
  user        User     @relation(fields: [auteur], references: [id])
  moduleRel   Module   @relation(fields: [module], references: [code])
}

model User {
  id            Int            @id @default(autoincrement())
  statut        String
  nom           String
  prenom        String
  email         String
  avertissement Int
  limite        Int
  deadlines     Deadline[]
  enseignements Enseignement[]
}

model Module {
  id            Int            @id @default(autoincrement())
  code          String         @unique
  titre         String
  semestre      Int
  profs         String
  deadlines     Deadline[]
  enseignements Enseignement[]
}

model Enseignement {
  id       Int    @id @default(autoincrement())
  userId   Int
  moduleId Int
  user     User   @relation(fields: [userId], references: [id])
  module   Module @relation(fields: [moduleId], references: [id])
}
